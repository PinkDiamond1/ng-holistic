<hlc-file-uploader *ngIf="!readonly" [accept]="accept" [single]="single" (filesAdded)="onAddFiles($event)">
</hlc-file-uploader>

<ul class="list-unstyled list-compact">
    <li *ngFor="let file of files; trackBy: trackByFile; let i = index">
        <!-- file with error -->
        <ng-container *ngIf="getFileError(file) as error; else noError">
            <ng-container *ngIf="!isFileUploaded(file)">
                <button class="btn btn-link btn-sm">{{ getFileName(file) }}</button>
                <button class="btn btn-icon btn-link btn-sm" type="button" (click)="onRetryUpload(file)">
                    <clr-icon shape="upload"></clr-icon>
                </button>
                <button class="btn btn-icon btn-link btn-sm" type="button" (click)="onRemoveCachedFile(file)">
                    <clr-icon shape="trash"></clr-icon>
                </button>
            </ng-container>
            <ng-container *ngIf="isFileUploaded(file)">
                <button class="btn btn-link btn-sm" (click)="onDownload(file)">{{ getFileName(file) }}</button>
                <button class="btn btn-icon btn-link btn-sm" type="button" (click)="onRemoveFile(file)">
                    <clr-icon shape="trash"></clr-icon>
                </button>
            </ng-container>
            <a *ngIf="error" href="javascript://" role="tooltip" aria-haspopup="true" class="tooltip tooltip-lg">
                <clr-icon shape="exclamation-circle" style="color: red" size="24"></clr-icon>
                <span class="tooltip-content">{{ error }}</span>
            </a>
        </ng-container>

        <!-- file with no errors -->
        <ng-template #noError>
            <ng-container *ngIf="isFileUploading(file) || isFileRemoving(file)">
                <button class="btn btn-link btn-sm">{{ getFileName(file) }}</button>
                <button class="btn btn-icon btn-link btn-sm"><span class="spinner spinner-inline"></span></button>
            </ng-container>
            <ng-container *ngIf="isFileUploaded(file) && !isFileRemoving(file)">
                <button class="btn btn-link btn-sm" (click)="onDownload(file)">{{ getFileName(file) }}</button>
                <button class="btn btn-icon btn-link btn-sm" type="button" (click)="onRemoveFile(file)">
                    <clr-icon shape="trash"></clr-icon>
                </button>
            </ng-container>
        </ng-template>
    </li>
</ul>
