<clr-wizard #wizard [clrWizardOpen]="true" (clrWizardOpenChange)="open = $event; openChanged.emit(open)">
    <!--
    [clrWizardPreventModalAnimation]="true"
    class="clr-wizard--inline clr-wizard--no-shadow clr-wizard--no-title"
>
-->
    <clr-wizard-title>{{ title }}</clr-wizard-title>

    <clr-wizard-button type="cancel">Cancel</clr-wizard-button>
    <clr-wizard-button type="previous">Back</clr-wizard-button>
    <clr-wizard-button type="next">Next</clr-wizard-button>
    <clr-wizard-button type="finish">Finish</clr-wizard-button>

    <ng-container *ngFor="let page of pages; trackBy: trackByPage">
        <clr-wizard-page
            *ngIf="!isPageSkip(page)"
            [clrWizardPagePreventDefault]="true"
            [clrWizardPageNextDisabled]="form && !form.form.formGroup?.valid"
            (clrWizardPageOnCommit)="onCommit(page)"
            (clrWizardPageOnCancel)="onCancel()"
            (clrWizardPagePrevious)="onBack()"
        >
            <ng-template clrPageTitle> {{ page.title }} </ng-template>
            <ng-template clrPageNavTitle> {{ page.navTitle }} </ng-template>
            <div class="spinner" *ngIf="commiting">Checking...</div>
            <clr-alert *ngIf="error" clrAlertType="danger">
                <div class="alert-item">{{ error }}</div>
            </clr-alert>

            <hlc-clr-form *ngIf="!isCustomPage(page) else customPage" [group]="getPageGroup(page)" #form>
            </hlc-clr-form>

            <ng-template #customPage>
                <ng-container
                    *ngTemplateOutlet="getCustomPageTemplate(page); context: { $implicit: formsValues }"
                ></ng-container>
            </ng-template>
        </clr-wizard-page>
    </ng-container>
</clr-wizard>
